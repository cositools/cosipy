

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Polarization &mdash; cosipy __version__ = &#34;0.3.4&#34;
 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=f9fafa83"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Source injector" href="source_injector.html" />
    <link rel="prev" title="Image deconvolution" href="image_deconvolution.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            cosipy
              <img src="../_static/cosipy_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/other_examples.html">Other examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="response.html">Detector response</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_io.html">Data IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="spacecraftfile.html">Spacecraft File</a></li>
<li class="toctree-l2"><a class="reference internal" href="threeml.html">COSILike (3ML plugin)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ts_map.html">TS Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="image_deconvolution.html">Image deconvolution</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Polarization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#conventions">Conventions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#orthographic">Orthographic</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stereographic">Stereographic</a></li>
<li class="toctree-l4"><a class="reference internal" href="#converting-from-one-convention-and-or-frame-to-another">Converting from one convention and/or frame to another</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#classes">Classes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="source_injector.html">Source injector</a></li>
<li class="toctree-l2"><a class="reference internal" href="util.html">Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">For developers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">cosipy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">API</a></li>
      <li class="breadcrumb-item active">Polarization</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api/polarization.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="polarization">
<h1>Polarization<a class="headerlink" href="#polarization" title="Link to this heading"></a></h1>
<section id="conventions">
<h2>Conventions<a class="headerlink" href="#conventions" title="Link to this heading"></a></h2>
<p>When specifying a polarization angle (PA) it is important to specify the direction of the source and the convention used. All of this is necessary to reconstruct the polarization vector –i.e. the direction of the electric field.</p>
<p>A polarization convention is defined by a set of (px,py) unit vectors (a basis) that define a plane at each location on the sphere s = [x,y,z]. The location s is always normal to the polarization plane defined by (px,py). The polarization angle increases from px to py.</p>
<p>Cosipy supports two major convention constructions: orthographic and stereographic. These are named after the corresponding conformal projection transformation.</p>
<p>In addition for the overall construction prescription, a polarization convention fully defined by the reference frame and whether the polarization angle increases clockwise or counter-clockwise when looking at the source.</p>
<section id="orthographic">
<h3>Orthographic<a class="headerlink" href="#orthographic" title="Link to this heading"></a></h3>
<p>This the regular polarization convention prescription found in the literature, where the px,py are aligned with the meridians and parallels, and one of them always points towards an arbitrary reference vector. For eample, the following figure corresponds to orthographic convention in ICRS coordinates, pointing towards the North-pole and counter-clockwise when looking at the source (only one quadrant is plotted for easier visualization):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">OrthographicConvention</span><span class="p">(</span><span class="n">ref_vector</span> <span class="o">=</span> <span class="n">SkyCoord</span><span class="p">(</span><span class="n">ra</span> <span class="o">=</span> <span class="mi">0</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">dec</span> <span class="o">=</span> <span class="mi">90</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">frame</span> <span class="o">=</span> <span class="s1">&#39;icrs&#39;</span><span class="p">),</span> <span class="n">clockwise</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/OrthographicZ-IAU.png"><img alt="OrthographicZ convention / IAU" src="../_images/OrthographicZ-IAU.png" style="width: 400px;" />
</a>
<p>This matches the <a class="reference external" href="https://www.iau.org/static/resolutions/IAU1973_French.pdf">IAU convention</a> and can be also called by name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PolarizationConvention</span><span class="o">.</span><span class="n">get_convention</span><span class="p">(</span><span class="s2">&quot;IAU&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Other special conventions of the orthographic family that can also be called by name are MEGAlibs RelativeX/Y/Z, where the -py vector points towards the reference vector (as opposed to px):</p>
<a class="reference internal image-reference" href="../_images/RelativeZ.png"><img alt="MEGAlib RelativeZ" src="../_images/RelativeZ.png" style="width: 400px;" />
</a>
<a class="reference internal image-reference" href="../_images/RelativeX.png"><img alt="MEGAlib RelativeX" src="../_images/RelativeX.png" style="width: 400px;" />
</a>
<a class="reference internal image-reference" href="../_images/RelativeY.png"><img alt="MEGAlib RelativeY" src="../_images/RelativeY.png" style="width: 400px;" />
</a>
</section>
<section id="stereographic">
<h3>Stereographic<a class="headerlink" href="#stereographic" title="Link to this heading"></a></h3>
<p>An issue of the orthographic projection is that it is not well-defined at the location of the reference vector and its antipodal direction. This can cause issues due to numerical errors when construction a detector response near those locations. The stereographic convention is meant to solve this issue by describing the polarization angle in spacecraft coordinates with only a single undefined location at -z, where the effective area is almost null. Due to the hairy ball theorem it is impossible to obtain a convention where the polarization basis vector have a smooth transition and with undefined locations.</p>
<p>Near the z-axis, it is very similar to using an orthographic convention with +x as the reference vector, and it deviates near and below the equator:</p>
<a class="reference internal image-reference" href="../_images/Stereographic.png"><img alt="Stereographic" src="../_images/Stereographic.png" style="width: 400px;" />
</a>
</section>
<section id="converting-from-one-convention-and-or-frame-to-another">
<h3>Converting from one convention and/or frame to another<a class="headerlink" href="#converting-from-one-convention-and-or-frame-to-another" title="Link to this heading"></a></h3>
<p>Use the <code class="code docutils literal notranslate"><span class="pre">transform_to</span></code> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pa_inertial</span> <span class="o">=</span>  <span class="n">PolarizationAngle</span><span class="p">(</span><span class="mi">20</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">source_direction</span><span class="p">,</span> <span class="n">convention</span> <span class="o">=</span> <span class="s1">&#39;IAU&#39;</span><span class="p">)</span>

<span class="n">pa2_sc</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">transform_to</span><span class="p">(</span><span class="s1">&#39;RelativeX&#39;</span><span class="p">,</span> <span class="n">attitude</span> <span class="o">=</span> <span class="n">Attitude</span><span class="o">.</span><span class="n">from_rotvec</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">pa2_sc</span><span class="o">.</span><span class="n">angle</span><span class="o">.</span><span class="n">degree</span><span class="p">)</span>
</pre></div>
</div>
<p>Results in 161.95. Note that in addition to accounting for the difference polarization reference vector, it also transforms from one reference frame to another on the fly.</p>
</section>
</section>
<section id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Link to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="image_deconvolution.html" class="btn btn-neutral float-left" title="Image deconvolution" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="source_injector.html" class="btn btn-neutral float-right" title="Source injector" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, COSI Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>